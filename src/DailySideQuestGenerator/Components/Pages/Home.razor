@page "/"
@rendermode InteractiveServer

<div class="app-shell">
    <div class="header">
        <h2>Daily Side-Quests</h2>
    </div>

    <div class="card">
        <h3>Progress</h3>
        <div>
            <strong>Level:</strong> @QuestService.UserProgress?.Level
            <span style="margin-left: 12px;"><strong>Total XP:</strong> @QuestService.UserProgress?.TotalXp</span>
            <span style="margin-left: 12px;"><strong>Streak:</strong> @QuestService.UserProgress?.DailyStreak</span>
        </div>
    </div>
    
    <div class="card">
        <h3>Categories (debug view)</h3>

        @if (_categories == null)
        {
            <p>Loading...</p>
        }
        else
        {
            @foreach (var c in _categories)
            {
                <span style="margin-right:10px;">
                    <strong>@c.Name</strong> (@c.Color)
                </span>
            }
        }
    </div>

    @if (_quests is null)
    {
        <div class="card">Loading...</div>
    }
    else if (!_quests.Any())
    {
        <div class="card">No quests for today.</div>
    }
    else
    {
        @foreach (var quest in _quests)
        {
            <QuestCard Quest="quest" OnToggled="OnToggled"></QuestCard>
        }
    }
</div>